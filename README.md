# **searchengine :exclamation: **
## ***My name is Sergey Koryushov! :mortar_board:***

Этот проект Search Engine является Поисковым движком по сайтам, ссылки которых задаются и названия сайтов задаются в конфигурации проекта application.yaml.

Код c кофигурацционного файла:
```java 
server:
        port: 8080
indexing-settings:
        sites:
        - url: https://www.lenta.ru/
        name: Лента.ру
        - url: https://www.skillbox.ru/
        name: Skillbox
        - url: https://www.playback.ru
        name: PlayBack.Ru
        - url: https://volochek.life/
        name: Volochek.Life
        - url: https://radiomv.ru/
        name: Radiomv.Ru
        - url: https://ipfran.ru/
        name: Ipfran.Ru
        server:
```

Описание файла и параметров:


Для индексации сайтов, нужно указать url сайта, name (название сайта);
_______________________________________________________________
В проекте используется база данных MySQL. 
Чтобы запустить индексацию, потребуется создать схему с именем : ***search_engine*** в базе данных.
В файле конфигурации прописана ссылка и порт для подключения к базе данных.
Необходимо указать Ваши данные для авторизации. 

Ссылка для подключения к БД выглядит следующим образом:
```java
spring:
datasource:
username: root
password: *********
url: jdbc:mysql://localhost:3306/search_engine?useSSL=false&requireSSL=false&allowPublicKeyRetrieval=true
jpa:
properties:
hibernate:
dialect: org.hibernate.dialect.MySQL8Dialect
hibernate:
ddl-auto: create
show-sql: true
```
___________________________



Основная структура проекта состоит из 3 сервисов:
1. Отбражение статистики - вкладка "DASHBOARD".
2. Индексация сайтов - вкладка "MANAGEMENT".
3. Поиск по сайтам - вкладка "SEARCH".

![search_engine](https://github.com/alexves-b/searchengine/assets/135314843/6c5e961b-4229-429c-ac52-8795e28cb713)

<h3 align="center">1. Отображение статистики.</h3>
Сервис отвечает за отображение корректной статистики при работе сервиса.
После старта процесса индексации на вкладке "MANAGEMENT" - Статистика обновится и начнет отслеживать процесс индексации.
Можно увидеть количество лемм и проиндексированных страниц каждого сайта, и общую информацию по всем сайтам.
Для корректного просмотра статистики страницу необходимо обновлять вручную.
_______________________________________________

<h3 align="center">2. Индексация сайтов.</h3>
На вкладке "MANAGEMENT" нажите на кнопку синего цвета STARTINDEXING.

![image](https://github.com/alexves-b/searchengine/assets/135314843/d3488644-8941-4551-9352-957318e33fc1)

В случае, если страницы были уже проиндексированны раннее, произойдет отчистка страниц, которая может занять продоложительное время.
Потребуется удалить множество индексов (около 500_000, большое число лемм и страниц).
Если Вы не уверены, что нажали на кнопку, можете нажать повторно.

После старта процесса индексации из файла конфигурации извлекаются данные по сайтам (url,name) и в рекурсивном
обходе происходит поиск ссылок по которым поисковый движок ещё не заходил.
Для рекурсивного обхода используется RecursiveAction и ForkJoinPool.

Каждый сайт запускается в отдельном потоке.
Потоки работают не совсем равномерно, поэтому не всегда можно ожидать одновременную индексацию всех сайтов.
По мере освобождения ресурсов, остальные сайты будут проиндексированны.

Для исключения дублей и повтрного обхода по посещенным ссылкам, используется сэт ссылок,
которые посетила программа при обходе и сэт сылок, которые ещё предстоит посетить.
В процессе индексации вместе с записью страниц, а затем лемм которые находятся на странице,
происходит запись индексов, отвечающих за соответствие страницы и леммы.
В момент записи страницы установлена блокировка, поскольку при многопоточном исполнении, могут появлятся нежелательные дубли. 
Наличие дубля, помимо повторения при поисковой выдаче, тратит время на индексацию лишних страниы, запись лишних лемм и индексов.
При проведении индексации в базу не записываются и пропускаются следующие расширения, не являющиеся интернет страницами:
.eps, .jpg, .jpeg, .png, .pdf, .doc, .xls, .xlsx, и страницы содержащие в своих путях "=ica" или "month=",
а также не содеержат "?" и "&" - что является признаком параметров HTTP запроса.

Скрин из Википедии, что такое лемматизация, и леммы: 
![lemma](https://github.com/alexves-b/searchengine/assets/135314843/422210bc-58b5-44ab-8664-b243e9f01147)
Скрин на английском языке:
![lemmanisation](https://github.com/alexves-b/searchengine/assets/135314843/5aec6af6-ac1a-4eb5-afc9-b37dabb2bb37)

В сервисе индексации добавлена возможность обновления/добавления страницы при указании её url, начиная с http://
![image](https://github.com/alexves-b/searchengine/assets/135314843/70fdbf1e-16be-49af-a787-a612f120fcfa)

В случае, если адрес страницы совпадет с сайтом из конфигурации, страница проиндексированна.
Если страница уже была ранее проиндексирванна, сначала будут удалены все индексы, частота лемм уменьшена, и удалена страница из базы.
В процессе индексации будет записана страница, добавлены леммы и созданы новые индексы.
_________________________________________________

<h3 align="center">3. Поиск по сайтам.</h3>

В верхнем поле, вы можете выбрать конкретный сайт для проведения поиска, или искать по всем сайтам.
Если поисковый запрос окажется пустым, программа выдаст соответствующее сообщение об ошибке.
Ищите, и получайте ссылки.
Вы можете указать одно, два или несколько слов.
Поиск не учитывает предолги, местоимения, междометия и частицы. 
Пример поискового запроса на скрине ниже:
![image](https://github.com/alexves-b/searchengine/assets/135314843/3ad13942-0bda-45d7-9b69-bee127503eb7)


Спасибо за внимание!
Если будут вопросы, всегда можно написать мне в Tg - https://t.me/Alexves98  :palm_tree:













